# LCARS 自动诊断报告 (Auto-Diagnostic Report)

> [!IMPORTANT]
> 本文件由 ADS (Auto-Diagnostic Routine) 自动维护。请参考诊断结论进行修复。

## 活跃故障 (Active Faults)
### ERR-0xEA4B | Dispatcher.handle_event
- **发生时间**: 2026-01-29 07:28:18
- **错误信息**: `name 'tools' is not defined`
- **原始指令**: `计算机，分析目前舰上有多少名 8 级以上权限的军官`
- **AI 诊断**: Failed to analyze fault via AI Brain.
- **建议方案**:

```diff
# ERROR: Diagnostic Subroutine Offline
```

---
### ERR-0xE10B | Dispatcher.handle_event
- **发生时间**: 2026-01-29 07:28:25
- **错误信息**: `name 'tools' is not defined`
- **原始指令**: `计算机，如果我的 Rank 提升为准将 (Commodore)，我的权限会有什么变化？`
- **AI 诊断**: The `tools` module was not imported or is not accessible within the `Dispatcher.handle_event` function.
- **建议方案**:

```diff
```diff
--- a/app/services/bot/app/dispatcher.py
+++ b/app/services/bot/app/dispatcher.py
@@ -1434,6 +1434,7 @@
         user_profile = await self.get_user_profile(event.user_id)
         if user_profile:
             user_profile = user_profile.get('profile', {})
+        from app.utils import tools
         proto_scan = tools.check_text_protocols(event.text, {"clearance": user_profile.get("clearance", 1)})
         if proto_scan:
             await self.send_message(event.channel, proto_scan)
```
```

---
### ERR-0x1A08 | Dispatcher.handle_event
- **发生时间**: 2026-01-29 07:28:33
- **错误信息**: `name 'tools' is not defined`
- **原始指令**: `计算机，查看舰长 (Captain) 的详细服役记录`
- **AI 诊断**: The `tools` module was not imported or is not accessible within the `Dispatcher.handle_event` function.
- **建议方案**:

```diff
```diff
--- a/app/dispatcher.py
+++ b/app/dispatcher.py
@@ -1434,6 +1434,7 @@
 
 
 from app.models import UserProfile
+from app import tools
 
 
 class Dispatcher:
```
```

---


*Generated by LCARS Engineering Subroutine (Version 2.0)*
