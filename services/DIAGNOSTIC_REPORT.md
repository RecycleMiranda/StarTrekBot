# LCARS 自动诊断报告 (Auto-Diagnostic Report)

> [!IMPORTANT]
> 本文件由 ADS (Auto-Diagnostic Routine) 自动维护。请参考诊断结论进行修复。

## 活跃故障 (Active Faults)
### ERR-0x0519 | SendQueue.QQSender
- **发生时间**: 2026-01-30 18:56:36
- **错误信息**: `NO_GROUP_ID_IN_META`
- **原始指令**: `滴滴滴`
- **AI 诊断**: SendQueue.QQSender 在发送消息时，meta 数据中缺少 group_id 导致发送失败。
- **建议方案**:

```diff
```diff
--- a/app/services/bot/app/sender_qq.py
+++ b/app/services/bot/app/sender_qq.py
@@ -21,6 +21,9 @@
     async def send(self, text: str, meta: dict, msg_id: str, mod_info: dict):
         """Send message to QQ group or user."""
         logger.info(f"Sending message: {text=}, {meta=}")
+        if 'group_id' not in meta:
+            logger.error(f"Missing group_id in meta: {meta=}")
+            raise RuntimeError("NO_GROUP_ID_IN_META")
         # TODO: Implement QQ message sending logic here
         # For now, just log the message
         logger.info(f"[QQ] Sending: {text} to {meta}")
```
```

---
### ERR-0xE2E7 | SendQueue.QQSender
- **发生时间**: 2026-01-30 18:57:24
- **错误信息**: `NO_GROUP_ID_IN_META`
- **原始指令**: `滴滴滴`
- **AI 诊断**: SendQueue.QQSender 在发送消息时，meta 数据中缺少 group_id，导致发送失败。
- **建议方案**:

```diff
```diff
--- a/app/services/bot/app/send_queue.py
+++ b/app/services/bot/app/send_queue.py
@@ -146,6 +146,9 @@
         text_to_send = item.text
         mod_info = item.mod_info
         try:
+            if 'group_id' not in item.meta:
+                logger.error(f"Missing group_id in meta: {item.meta}")
+                raise RuntimeError("NO_GROUP_ID_IN_META")
             await self.sender.send(text_to_send, item.meta, item.id, mod_info)
             self.send_task_done(item.id, True)
         except Exception as e:
```
```

---


*Generated by LCARS Engineering Subroutine (Version 2.0)*
