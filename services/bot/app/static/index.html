<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星舰全舰指挥中心 - Unified Command Hub</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* Panel switching styles */
        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        .qr-container {
            text-align: center;
            margin-top: 20px;
            background: #eee;
            padding: 10px;
            border-radius: 5px;
            min-height: 200px;
        }

        .qr-container img {
            max-width: 250px;
        }
    </style>
</head>

<body>
    <div class="lcars-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="elbow-top-left"></div>
            <div class="menu-items">
                <div class="menu-btn active" data-panel="bridge">全舰状态</div>
                <div class="menu-btn" data-panel="navigation">导航 (QQ 登录)</div>
                <div class="menu-btn" data-panel="engineering">工程部 (设置)</div>
                <div class="menu-btn" data-panel="sentinel">哨兵矩阵 (S.E.S.M.)</div>
                <div class="menu-btn" data-panel="records">子空间记录 (日志)</div>
                <button class="menu-btn link-btn" onclick="window.location.href='/admin/napcat'">原生控制台</button>
            </div>
            <div class="elbow-bottom-left"></div>
        </div>

        <!-- 主内容区 -->
        <main class="content">
            <header class="main-header">
                <h1 id="panel-title">STARSHIP BRIDGE - 实时状态</h1>
                <div class="st-line"></div>
            </header>

            <!-- 面板 1: 全舰状态 -->
            <section id="bridge" class="panel active config-panel">
                <div class="status-grid">
                    <div class="status-card">
                        <h3>子空间引擎 (AI)</h3>
                        <p id="gemini-status">正在检测...</p>
                    </div>
                    <div class="status-card">
                        <h3>防御护盾 (审核)</h3>
                        <p id="mod-status">正在检测...</p>
                    </div>
                    <div class="status-card">
                        <h3>通讯中继 (QQ)</h3>
                        <p id="qq-status">等待导航系统...</p>
                    </div>
                </div>
            </section>

            <!-- 面板 2: 导航 (登录) -->
            <section id="navigation" class="panel config-panel">
                <h2>全舰导航系统 - QQ 身份验证</h2>
                <p>请扫描二维码以激活子空间通讯中继。</p>
                <div class="qr-container" id="qr-box">
                    <p style="color: #333">正在获取二维码...</p>
                </div>
                <footer class="controls">
                    <button class="st-btn" id="refresh-qr">重新获取二维码</button>
                </footer>
            </section>

            <!-- 面板 3: 工程部 (设置) -->
            <section id="engineering" class="panel config-panel">
                <form id="engineering-form" autocomplete="on">
                    <div class="field-group">
                        <label>群聊解析与过滤 (BOT_ENABLED_GROUPS)</label>
                        <input type="text" id="enabled_groups" placeholder="例如：123456, 789012 或 *">
                    </div>

                    <div class="field-group">
                        <label>GEMINI API 密钥</label>
                        <input type="password" id="gemini_api_key" autocomplete="current-password">
                    </div>

                    <div class="field-grid">
                        <div class="field-group">
                            <label>过滤引擎</label>
                            <select id="moderation_provider">
                                <option value="local">本地词库</option>
                                <option value="tencent">腾讯云 TMS</option>
                            </select>
                        </div>
                        <div class="field-group">
                            <label>审核开关</label>
                            <select id="moderation_enabled">
                                <option value="false">禁用</option>
                                <option value="true">启用</option>
                            </select>
                        </div>
                    </div>

                    <div class="st-line header-small"></div>
                    <h2>NAPCAT 核心参数</h2>
                    <div class="field-grid">
                        <div class="field-group">
                            <label>管理端口 (PORT)</label>
                            <input type="number" id="napcat_port">
                        </div>
                        <div class="field-group">
                            <label>管理 TOKEN</label>
                            <input type="password" id="napcat_token" autocomplete="current-password">
                        </div>
                    </div>

                    <footer class="controls">
                        <button type="button" class="st-btn save" id="save-btn">同步至主控中心</button>
                        <span id="status-msg"></span>
                    </footer>
                </form>
            </section>

            <!-- 面板 4: 哨兵矩阵 -->
            <section id="sentinel" class="panel config-panel">
                <header class="panel-inner-header">
                    <h2>S.E.S.M. SENTINEL - 自主逻辑流控中心</h2>
                    <p class="subtitle">实时监控活动逻辑基因与条件触发频率</p>
                </header>
                <div class="sentinel-grid" id="sentinel-list">
                    <!-- Sentinel cards will be injected here -->
                    <div class="status-card" style="grid-column: 1/-1; border-color: gray;">
                        <p>正在连接哨兵核心，请稍候...</p>
                    </div>
                </div>
            </section>
            <section id="records" class="panel config-panel">
                <div class="log-window" id="log-content">
                    [02:24:00] 系统启动...
                    [02:24:01] 等待日志流提取...
                </div>
            </section>
        </main>
    </div>
    <script src="/static/app.js"></script>
</body>

</html>