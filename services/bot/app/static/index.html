<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星舰控制中心 - LCARS 管理后台</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="lcars-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="elbow-top-left"></div>
            <div class="menu-items">
                <div class="menu-btn active">指挥部设置</div>
                <button class="menu-btn link-btn" onclick="window.location.href='/admin/napcat'">NAPCAT 控制台</button>
                <div class="menu-btn" onclick="alert('即将上线：查看实时日志')">子空间记录</div>
                <div class="menu-btn" onclick="alert('即将上线：全舰传感器')">全舰状态</div>
            </div>
            <div class="elbow-bottom-left"></div>
        </div>

        <!-- 主内容区 -->
        <main class="content">
            <header class="main-header">
                <h1>星舰计算中心 - 核心配置</h1>
                <div class="st-line"></div>
            </header>

            <section class="config-panel">
                <div class="field-group">
                    <label>群聊解析与过滤 (BOT_ENABLED_GROUPS)</label>
                    <input type="text" id="enabled_groups" placeholder="例如：123456, 789012 或 *">
                    <small>授权机器人响应的群号（英文逗号分隔）。输入 * 为不限群聊。</small>
                </div>

                <div class="field-group">
                    <label>计算机指令前缀 (COMPUTER_PREFIX)</label>
                    <input type="text" id="computer_prefix" placeholder="例如：Computer:">
                </div>

                <div class="field-grid">
                    <div class="field-group">
                        <label>发送者模式 (SENDER_TYPE)</label>
                        <select id="sender_type">
                            <option value="mock">MOCK (仅记录日志，测试用)</option>
                            <option value="qq">QQ (调用真实 API 发送)</option>
                        </select>
                    </div>
                    <div class="field-group">
                        <label>RP 风格强制简洁 (STYLE_STRICT)</label>
                        <select id="rp_style_strict">
                            <option value="true">开启 (严格限制字数)</option>
                            <option value="false">关闭 (允许更长的回复)</option>
                        </select>
                    </div>
                </div>

                <div class="st-line header-small"></div>
                <h2>子空间通讯协议 (GEMINI AI 引擎)</h2>

                <div class="field-group">
                    <label>GEMINI API 密钥 (API_KEY)</label>
                    <input type="password" id="gemini_api_key" placeholder="在此输入你的 Gemini API Key">
                    <small>用于角色扮演 (RP) 与意图判断的后端密钥。</small>
                </div>

                <div class="field-group">
                    <label>模型规格 (RP_MODEL)</label>
                    <input type="text" id="gemini_rp_model" placeholder="gemini-2.0-flash-lite">
                </div>

                <div class="st-line header-small"></div>
                <h2>安全防护层 (内容审核插件)</h2>

                <div class="field-grid">
                    <div class="field-group">
                        <label>全局审核开关</label>
                        <select id="moderation_enabled">
                            <option value="false">禁用 (开发调试模式)</option>
                            <option value="true">启用 (安全过滤模式)</option>
                        </select>
                    </div>
                    <div class="field-group">
                        <label>过滤引擎选择</label>
                        <select id="moderation_provider">
                            <option value="local">本地词库 (无需 Key, 简单快速)</option>
                            <option value="tencent">腾讯云 TMS (需要 Key, 智能精准)</option>
                        </select>
                    </div>
                </div>

                <div id="local-mod-info" class="field-group">
                    <small>本地词库模式下，请在 VPS 的 <code>/app/data/keywords.txt</code> 中维护违禁词，每行一个。</small>
                    <div style="margin-top: 10px;">
                        <button class="st-btn"
                            style="background: var(--lcars-blue); padding: 5px 15px; font-size: 0.8rem;"
                            id="sync-keywords-btn">从云端同步数千个通用违禁词</button>
                    </div>
                </div>

                <div id="tencent-auth-fields" class="field-grid">
                    <div class="field-group">
                        <label>腾讯云 SECRET_ID</label>
                        <input type="password" id="tencent_secret_id">
                    </div>
                    <div class="field-group">
                        <label>腾讯云 SECRET_KEY</label>
                        <input type="password" id="tencent_secret_key">
                    </div>
                </div>

                <div class="st-line header-small"></div>
                <h2>指令分发链路 (端点配置)</h2>

                <div class="field-group">
                    <label>QQ 消息发送 API (SEND_ENDPOINT)</label>
                    <input type="text" id="qq_send_endpoint" placeholder="http://ip:port/send_msg">
                </div>

                <footer class="controls">
                    <button class="st-btn save" id="save-btn">同步至主控中心</button>
                    <span id="status-msg"></span>
                </footer>
            </section>
        </main>
    </div>
    <script src="/static/app.js"></script>
</body>

</html>